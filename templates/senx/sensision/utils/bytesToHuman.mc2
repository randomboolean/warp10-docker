0 MACROTTL
<%
    'val' STORE
    [ 'Bytes' 'KB' 'MB' 'GB' 'TB' 'PB' 'EB' 'ZB' 'YB' ] 'u' STORE
    $val TOSTRING SIZE 'len' STORE
    $val LOG 1024 LOG / FLOOR TOLONG 'd' STORE
    <% 0 $len > %> <% 0 %> <% $len %> IFTE 'c' STORE
    $val TODOUBLE 1024.0 $d ** / 10 $c ** * CEIL 10 $c ** / TOSTRING 'v' STORE
    $v '.' SPLIT 'v' STORE
    $v SIZE 1 >
    <% $v 0 GET '.' + $v 1 GET 0 2 SUBSTRING + %>
    <% $v 0 GET %> IFTE
    ' ' + $u $d GET +
%> 'macro' STORE
$macro